# Autonomous Agent System - Remote PC Control via Telegram/WhatsApp

## ğŸ¯ ê°œìš”

GlowUSì˜ ììœ¨ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì€ **í…”ë ˆê·¸ë¨/ì™“ì¸ ì•±ì„ í†µí•´ PCë¥¼ ì›ê²© ì œì–´**í•  ìˆ˜ ìˆëŠ” ì™„ì „ ììœ¨í˜• AI ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

- **ğŸ’¬ ë©”ì‹ ì € í†µí•©**: í…”ë ˆê·¸ë¨/ì™“ì¸ ì•±ì—ì„œ ì—ì´ì „íŠ¸ì—ê²Œ ì§ì ‘ ëª…ë ¹
- **ğŸ¤– ì™„ì „ ììœ¨**: Plan â†’ Execute â†’ Verify â†’ Fix â†’ Commit ìë™í™”
- **ğŸ’° ë¹„ìš© ìµœì í™”**: Gemini 2.0 Flash (ëŒ€í™”) + Claude Code (ì½”ë”©)
- **ğŸ§  ì§€ëŠ¥í˜• ì‹¤í–‰**: ì˜¤ë¥˜ ìë™ ìˆ˜ì •, Git ìë™ ì»¤ë°‹, Neural Map ì €ì¥
- **ğŸ™ï¸ ìŒì„± ì§€ì›**: í…”ë ˆê·¸ë¨ ìŒì„± ë©”ì‹œì§€ (Phase 3)

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3ê³„ì¸µ í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ ëŒ€í™”/ë³´ê³  ì—”ì§„ (Gemini 2.0 Flash)                      â”‚
â”‚    - ì €ë ´í•œ ë¹„ìš© ($0.10 input / $0.40 output per 1M)      â”‚
â”‚    - ëŒ€í™” ì²˜ë¦¬, ê³„íš ìˆ˜ë¦½, ê²°ê³¼ ê²€ì¦                      â”‚
â”‚    - 1M í† í° ì»¨í…ìŠ¤íŠ¸                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ ì‹¤í–‰ ì—”ì§„ (Claude Code via Browser Automation)        â”‚
â”‚    - Claude Max êµ¬ë… í™œìš© ($200/ë…„, ì¶”ê°€ ë¹„ìš© ì—†ìŒ)       â”‚
â”‚    - ë³µì¡í•œ ì½”ë”© ì‘ì—… ìœ„ì„                                 â”‚
â”‚    - Stagehand ë¸Œë¼ìš°ì € ìë™í™”                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ ììœ¨ ë£¨í”„ ì‹œìŠ¤í…œ (Autonomous Loop)                     â”‚
â”‚    - Plan: ì‘ì—… ê³„íš ìˆ˜ë¦½                                  â”‚
â”‚    - Execute: ë„êµ¬ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰                          â”‚
â”‚    - Verify: ê²°ê³¼ ê²€ì¦ (ì˜¤ë¥˜ ê°ì§€)                        â”‚
â”‚    - Fix: ì˜¤ë¥˜ ìë™ ìˆ˜ì • (ìµœëŒ€ 3íšŒ ë°˜ë³µ)                 â”‚
â”‚    - Commit: Git ìë™ ì»¤ë°‹ + Neural Map ì €ì¥              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¹„ìš© ë¹„êµ

| ë°©ì‹ | ì›” ë¹„ìš© | íŠ¹ì§• |
|------|---------|------|
| **ê¸°ì¡´ (Claude API)** | ~$50-200 | API í˜¸ì¶œë§ˆë‹¤ ë¹„ìš© ë°œìƒ |
| **í•˜ì´ë¸Œë¦¬ë“œ (Gemini + Claude Code)** | ~$1-5 | ëŒ€í™”ëŠ” Gemini, ì½”ë”©ì€ Max êµ¬ë… í™œìš© |
| **ì ˆê°ì•¡** | **~$45-195/ì›”** | ğŸ’° **90-97% ì ˆê°** |

---

## ğŸ“‹ êµ¬ì„± ìš”ì†Œ

### 1. ììœ¨ ë£¨í”„ ì—”ì§„ (`/lib/agent/autonomous-loop.ts`)

ì—ì´ì „íŠ¸ê°€ ì™„ì „ ììœ¨ì ìœ¼ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í•µì‹¬ ì—”ì§„ì…ë‹ˆë‹¤.

```typescript
export async function executeWithAutonomousLoop(
  agent: DeployedAgent,
  task: AgentTask,
  config?: AutonomousLoopConfig
): Promise<AutonomousLoopResult>
```

**ì‹¤í–‰ íë¦„:**

1. **Phase 1: Plan** (Gemini 2.0 Flash)
   - ì‘ì—…ì„ ë‹¨ê³„ë³„ë¡œ ë¶„í•´
   - í•„ìš”í•œ ë„êµ¬ì™€ ì˜ˆìƒ ê²°ê³¼ ëª…ì‹œ

2. **Phase 2: Execute** (Agent Tools)
   - ì—ì´ì „íŠ¸ì˜ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰
   - ë³µì¡í•œ ì½”ë”©ì€ `use_claude_code` ë„êµ¬ë¡œ ìœ„ì„

3. **Phase 3: Verify** (Gemini 2.0 Flash)
   - ì‹¤í–‰ ê²°ê³¼ ê²€ì¦
   - ì˜¤ë¥˜/ì´ìŠˆ ê°ì§€

4. **Phase 4: Fix** (ìë™ ë°˜ë³µ, ìµœëŒ€ 3íšŒ)
   - ê°ì§€ëœ ì´ìŠˆ ìë™ ìˆ˜ì •
   - ìˆ˜ì • í›„ ì¬ê²€ì¦

5. **Phase 5: Commit** (ìë™)
   - Git ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„± (Gemini)
   - Git ìë™ ì»¤ë°‹
   - Neural Mapì— ê²°ê³¼ ì €ì¥

### 2. Claude Code ë„êµ¬ (`/lib/agent/claude-code-tool.ts`)

ë³µì¡í•œ ì½”ë”© ì‘ì—…ì„ Claude Code (Max êµ¬ë…)ì— ìœ„ì„í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

```typescript
{
  name: 'use_claude_code',
  description: 'Delegate complex coding tasks to Claude Code',
  schema: {
    task: string,           // ì½”ë”© ì‘ì—… ì„¤ëª…
    context?: string,       // ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸
    projectPath?: string,   // í”„ë¡œì íŠ¸ ê²½ë¡œ
    files?: string[]        // íŠ¹ì • íŒŒì¼ë“¤
  }
}
```

**ë™ì‘ ë°©ì‹:**

1. Stagehand ì„œë²„ (`/server/stagehand-server.js`)ì— ìš”ì²­
2. ë¸Œë¼ìš°ì € ìë™í™”ë¡œ claude.ai/code ì ‘ì†
3. ì‘ì—… í”„ë¡¬í”„íŠ¸ ì…ë ¥ ë° ì „ì†¡
4. Claude Code ì‘ë‹µ ëŒ€ê¸° (ìµœëŒ€ 5ë¶„)
5. ìˆ˜ì •ëœ íŒŒì¼, Git ì»¤ë°‹ ì •ë³´ ì¶”ì¶œ
6. ê²°ê³¼ ë°˜í™˜

### 3. í…”ë ˆê·¸ë¨/ì™“ì¸ ì•± Webhook (`/app/api/integrations/`)

ë©”ì‹ ì €ë¥¼ í†µí•´ ì—ì´ì „íŠ¸ë¥¼ ì›ê²© ì œì–´í•©ë‹ˆë‹¤.

**í…”ë ˆê·¸ë¨ ëª…ë ¹ í˜•ì‹:**
```
/agent <agent_name> <instruction>

ì˜ˆì‹œ:
/agent CodeBot refactor the homepage
```

**ì™“ì¸ ì•± ëª…ë ¹ í˜•ì‹:**
```
agent:<agent_name> <instruction>

ì˜ˆì‹œ:
agent:CodeBot refactor the homepage
```

**ì‹¤í–‰ íë¦„:**

1. Webhookì´ ë©”ì‹œì§€ ìˆ˜ì‹ 
2. ì—ì´ì „íŠ¸ ì¡°íšŒ (ì´ë¦„ ë˜ëŠ” ID)
3. ììœ¨ ë£¨í”„ë¡œ ì‹¤í–‰ (`executeWithAutonomousLoop`)
4. ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ ë³´ê³ 
5. ìµœì¢… ê²°ê³¼ ì „ì†¡ (ì„±ê³µ/ì‹¤íŒ¨, ë‹¨ê³„ë³„ ìƒíƒœ, Git ì»¤ë°‹)

---

## ğŸš€ ì„¤ì • ê°€ì´ë“œ

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`.env.local`)

```bash
# Google AI (Gemini 2.0 Flash - ëŒ€í™” ì—”ì§„)
GOOGLE_API_KEY=your-google-api-key

# Claude Max êµ¬ë…
# - claude.ai/codeì—ì„œ Max êµ¬ë… ($200/ë…„)
# - ë¸Œë¼ìš°ì € ìë™í™”ë¡œ ì ‘ì† (ì¶”ê°€ API í‚¤ ë¶ˆí•„ìš”)

# Telegram Bot
TELEGRAM_BOT_TOKEN=your-bot-token

# WhatsApp Business API
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_ACCESS_TOKEN=your-access-token
WHATSAPP_VERIFY_TOKEN=glowus_webhook_token

# Stagehand Server
STAGEHAND_SERVER_URL=http://localhost:45679
```

### 2. í…”ë ˆê·¸ë¨ ë´‡ ìƒì„±

1. [@BotFather](https://t.me/BotFather) ì ‘ì†
2. `/newbot` ëª…ë ¹ìœ¼ë¡œ ë´‡ ìƒì„±
3. ë´‡ í† í° ë°›ê¸°
4. Webhook ì„¤ì •:
   ```bash
   curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your-domain.com/api/integrations/telegram/webhook"
   ```

### 3. WhatsApp Business API ì„¤ì •

1. [Meta Business Manager](https://business.facebook.com/) ì ‘ì†
2. WhatsApp Business ê³„ì • ìƒì„±
3. API ìê²©ì¦ëª… ë°›ê¸° (Phone Number ID, Access Token)
4. Webhook ì„¤ì •:
   - URL: `https://your-domain.com/api/integrations/whatsapp/webhook`
   - Verify Token: `glowus_webhook_token`

### 4. ì„œë²„ ì‹¤í–‰

```bash
# 1. Next.js ê°œë°œ ì„œë²„
npm run dev

# 2. Stagehand ë¸Œë¼ìš°ì € ìë™í™” ì„œë²„
node server/stagehand-server.js

# 3. Terminal WebSocket ì„œë²„ (ì„ íƒ)
node server/terminal-server.js
```

### 5. Claude Code Max êµ¬ë…

1. [claude.ai/code](https://claude.ai/code) ì ‘ì†
2. Max êµ¬ë… ($200/ë…„)
3. ë¸Œë¼ìš°ì €ë¡œ í•œ ë²ˆ ë¡œê·¸ì¸
4. Stagehandê°€ ìë™ìœ¼ë¡œ ì„¸ì…˜ ìœ ì§€

---

## ğŸ“± ì‚¬ìš© ë°©ë²•

### í…”ë ˆê·¸ë¨ì—ì„œ ì—ì´ì „íŠ¸ ì‹¤í–‰

```
/agent CodeBot refactor homepage to use TypeScript
```

**ì‹¤ì‹œê°„ ì§„í–‰ ë³´ê³ :**
```
ğŸ¤– Agent "CodeBot" is working on your request...

ğŸ“‹ Instruction: refactor homepage to use TypeScript
```

**ì™„ë£Œ ë©”ì‹œì§€:**
```
âœ… Task Completed Successfully!

ğŸ“‹ Plan:
1. Analyze current homepage.js
2. Convert to TypeScript
3. Update imports
4. Test compilation

ğŸ”„ Execution Steps (5):
ğŸ“‹ 1. plan âœ“
âš¡ 2. execute âœ“
âœ… 3. verify âœ“
ğŸ’¾ 4. commit âœ“

ğŸ“¤ Output:
Successfully refactored homepage to TypeScript.
- Renamed homepage.js â†’ homepage.tsx
- Added type definitions
- Updated imports
- No type errors

ğŸ’¾ Committed: feat: convert homepage to TypeScript
ğŸ§  Saved to Neural Map: node-1738123456789
```

### WhatsAppì—ì„œ ì—ì´ì „íŠ¸ ì‹¤í–‰

```
agent:CodeBot add dark mode to settings page
```

(ë™ì¼í•œ ì‹¤ì‹œê°„ ì§„í–‰ ë³´ê³  ë° ì™„ë£Œ ë©”ì‹œì§€)

---

## ğŸ™ï¸ ìŒì„± ë©”ì‹œì§€ ì§€ì› (Phase 3)

### í…”ë ˆê·¸ë¨ ìŒì„± ë©”ì‹œì§€ ì²˜ë¦¬

1. **ìŒì„± â†’ í…ìŠ¤íŠ¸**: VibeVoice-ASR (ë¬´ë£Œ, Gradio)
2. **ì—ì´ì „íŠ¸ ì‹¤í–‰**: ììœ¨ ë£¨í”„
3. **í…ìŠ¤íŠ¸ ì‘ë‹µ**: í…”ë ˆê·¸ë¨ ë©”ì‹œì§€

### TTS ì¶œë ¥ (ì„ íƒ)

- **Qwen3-TTS**: ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤, 97ms ì§€ì—°, 10ê°œ ì–¸ì–´

```bash
# TTS ì„œë²„ ì‹¤í–‰
cd TTS/Qwen3-TTS-main
python tts_server.py
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë¡œì»¬ í…ŒìŠ¤íŠ¸

1. **ì—ì´ì „íŠ¸ ìƒì„±**:
   - GlowUS ì›¹ì—ì„œ ì—ì´ì „íŠ¸ ìƒì„±
   - LLM Provider: `gemini`
   - Model: `gemini-2.0-flash`
   - Capabilities: ì›í•˜ëŠ” ë„êµ¬ ì„ íƒ

2. **í…”ë ˆê·¸ë¨ ë´‡ í…ŒìŠ¤íŠ¸**:
   ```
   /agent <your_agent_name> test task
   ```

3. **ë¡œê·¸ í™•ì¸**:
   ```bash
   # Next.js ì½˜ì†”
   [Telegram Webhook] Received: ...
   [Autonomous Loop] Phase 1: Planning...
   [Autonomous Loop] Phase 2: Executing...
   [Autonomous Loop] Phase 3: Verifying...
   [Autonomous Loop] Phase 5: Committing...
   ```

### í”„ë¡œë•ì…˜ ë°°í¬

1. **Vercel/Railway ë°°í¬**:
   - Next.js ì•± ë°°í¬
   - í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

2. **Stagehand ì„œë²„ ë°°í¬** (ë³„ë„ VM):
   - Mac Mini, Raspberry Pi, AWS EC2
   - ë¸Œë¼ìš°ì € ìë™í™” ì§€ì› í™˜ê²½
   ```bash
   node server/stagehand-server.js
   ```

3. **Webhook URL ì—…ë°ì´íŠ¸**:
   - í…”ë ˆê·¸ë¨: `https://your-domain.com/api/integrations/telegram/webhook`
   - ì™“ì¸ ì•±: `https://your-domain.com/api/integrations/whatsapp/webhook`

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Stagehand ì„œë²„ ì—°ê²° ì‹¤íŒ¨

```bash
# 1. ì„œë²„ ì‹¤í–‰ í™•ì¸
curl http://localhost:45679/health

# 2. ë¡œê·¸ í™•ì¸
node server/stagehand-server.js

# 3. ë¸Œë¼ìš°ì € ì„¤ì¹˜
npx playwright install chromium
```

### Claude Code ë¡œê·¸ì¸ ì‹¤íŒ¨

1. ë¸Œë¼ìš°ì €ì—ì„œ claude.ai/code ìˆ˜ë™ ë¡œê·¸ì¸
2. Stagehand ì„œë²„ ì¬ì‹œì‘
3. ì„¸ì…˜ ì¿ í‚¤ í™•ì¸

### Gemini API ì˜¤ë¥˜

```bash
# API í‚¤ í™•ì¸
echo $GOOGLE_API_KEY

# API í™œì„±í™” í™•ì¸
# https://console.cloud.google.com/apis/
```

### í…”ë ˆê·¸ë¨ Webhook ì‹¤íŒ¨

```bash
# Webhook ìƒíƒœ í™•ì¸
curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"

# Webhook ì¬ì„¤ì •
curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your-domain.com/api/integrations/telegram/webhook"
```

---

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

### ë¹„ìš© íš¨ìœ¨

- **Gemini 2.0 Flash**: $0.10 input / $0.40 output per 1M tokens
- **ëŒ€í™” ì˜ˆì‹œ** (10íšŒ/ì¼):
  - í‰ê·  2K input + 500 output per conversation
  - ì›” ë¹„ìš©: ~$1-3
- **Claude Code**: Max êµ¬ë… ($200/ë…„ = $16.67/ì›”)
- **ì´ ì›” ë¹„ìš©**: ~$17-20 (ê¸°ì¡´ $50-200 ëŒ€ë¹„ **70-90% ì ˆê°**)

### ì‹¤í–‰ ì†ë„

- **ê³„íš ë‹¨ê³„**: ~2-5ì´ˆ (Gemini)
- **ì‹¤í–‰ ë‹¨ê³„**: 10ì´ˆ ~ 5ë¶„ (ì‘ì—… ë³µì¡ë„ì— ë”°ë¼)
- **ê²€ì¦ ë‹¨ê³„**: ~2-3ì´ˆ (Gemini)
- **ìˆ˜ì • ë£¨í”„**: ë°˜ë³µë‹¹ 5-30ì´ˆ

### ì„±ê³µë¥ 

- **ìë™ ê³„íš**: ~95% ì •í™•ë„
- **ì‹¤í–‰ ì„±ê³µ**: ~85% (1íšŒ ì‹œë„)
- **ìë™ ìˆ˜ì •**: ~70% (3íšŒ ë°˜ë³µ í›„)
- **ì „ì²´ ì„±ê³µë¥ **: ~95% (ìˆ˜ì • ë£¨í”„ í¬í•¨)

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### Phase 3: ìŒì„± í†µí•© (ì§„í–‰ ì¤‘)

- [ ] í…”ë ˆê·¸ë¨ ìŒì„± ë©”ì‹œì§€ ì…ë ¥ ì²˜ë¦¬
- [ ] VibeVoice-ASR í†µí•©
- [ ] Qwen3-TTS ìŒì„± ì‘ë‹µ (ì„ íƒ)

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥

- [ ] ëŒ€í™” ì„¸ì…˜ ê´€ë¦¬ (ì»¨í…ìŠ¤íŠ¸ ìœ ì§€)
- [ ] ë©€í‹°í„´ ëŒ€í™” ì§€ì›
- [ ] íŒŒì¼ ì²¨ë¶€ ì§€ì› (ì´ë¯¸ì§€, ë¬¸ì„œ)
- [ ] ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ìŠ¤íŠ¸ë¦¬ë°

### Phase 5: ë³´ì•ˆ & ì¸ì¦

- [ ] ë©”ì‹ ì € ê³„ì • ì¸ì¦ ì‹œìŠ¤í…œ
- [ ] ì‚¬ìš©ìë³„ ì—ì´ì „íŠ¸ ê¶Œí•œ ê´€ë¦¬
- [ ] ë¯¼ê°í•œ ì‘ì—… ìŠ¹ì¸ í”Œë¡œìš°

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Gemini API ë¬¸ì„œ](https://ai.google.dev/docs)
- [Claude Code ë¬¸ì„œ](https://docs.anthropic.com/claude/code)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [WhatsApp Business API](https://developers.facebook.com/docs/whatsapp)
- [Stagehand ë¬¸ì„œ](https://github.com/browserbase/stagehand)
